(window.webpackJsonpblogit=window.webpackJsonpblogit||[]).push([[0],{26:function(e,t,n){e.exports=n(55)},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(10),c=n.n(l),u=n(9),o=n(23),i=n(24),s=n(1),d=n.n(s),p=n(2),f=n(5),m=n.n(f),g=null,b={getAll:function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/blogs");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:g}},e.next=3,m.a.post("/api/blogs",t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(p.a)(d.a.mark((function e(t,n){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:g}},e.prev=1,e.next=4,m.a.put("".concat("/api/blogs","/").concat(t),n,r);case 4:return a=e.sent,e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),setToken:function(e){g="bearer ".concat(e)},removeToken:function(){g=null},remove:function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:g}},e.next=3,m.a.delete("".concat("/api/blogs","/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BLOG":return t.data;case"LIKE":return e.map((function(e){return e.id!==t.data.id?e:t.data.likedBlog}));default:return e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MESSAGE":case"ERR_MESSAGE":case"CLEAR_MESSAGE":case"DO":return t.data;default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERR_MESSAGE":case"CLEAR_MESSAGE":return t.data;default:return e}},w={login:function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN":return console.log("action data:",t.data),t.data;case"LOG_OUT":return t.data;default:return e}},k=Object(u.c)({errMessage:y,message:h,blogs:v,user:O}),j=Object(u.d)(k,Object(u.a)(o.a)),S=n(7),x=(n(54),function(e){return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:e.handleLogin},a.a.createElement("h2",null,"Log in to application:"),a.a.createElement("label",null,"Username:",a.a.createElement("br",null),a.a.createElement("input",e.username),a.a.createElement("br",null)),a.a.createElement("label",null,"Password:",a.a.createElement("br",null),a.a.createElement("input",e.password),a.a.createElement("br",null)),a.a.createElement("br",null),a.a.createElement("button",{type:"submit"},"Kirjaudu")),a.a.createElement("br",null))}),L=function(e){return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:e.handleBlogi},a.a.createElement("h2",null,"Create new blog"),a.a.createElement("label",null,"Title:",a.a.createElement("br",null),a.a.createElement("input",e.title),a.a.createElement("br",null)),a.a.createElement("label",null,"Author:",a.a.createElement("br",null),a.a.createElement("input",e.author),a.a.createElement("br",null)),a.a.createElement("label",null,"Url:",a.a.createElement("br",null),a.a.createElement("input",e.url),a.a.createElement("br",null)),a.a.createElement("label",null,"Likes:",a.a.createElement("br",null),a.a.createElement("input",e.likes)),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("button",{type:"submit"},"Create blog")))},M=n(8),B=function(e,t){var n=Object(r.useState)(!1),l=Object(M.a)(n,2),c=l[0],u=l[1],o={display:c?"none":""},i={display:c?"":"none"};return a.a.createElement("div",null,a.a.createElement("div",{onClick:function(){u(!c)},className:"show"}," ",e.openBlog,a.a.createElement("div",{style:o})),a.a.createElement("div",{style:i,className:"toggleContent"},e.children))},A=function(e){var t=e.blog,n=e.addLike,r=e.removeBlog,l=e.userName,c=e.blogiUserName,u=a.a.createElement("div",null,t.title," added by ",t.author),o={display:l===c?"":"none"};return a.a.createElement("div",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5},className:"blogi"},a.a.createElement(B,{openBlog:u},a.a.createElement("div",null,a.a.createElement("a",{href:t.url},t.url),a.a.createElement("br",null),t.likes," likes\xa0\xa0",a.a.createElement("button",{onClick:n},"Like"),a.a.createElement("br",null),"added by ",t.author,a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("div",{style:o},a.a.createElement("button",{onClick:r},"Remove")))))},G=Object(S.b)((function(e){return{msg:e.message,errMsg:e.errMessage}}))((function(e){var t,n=null===e.msg?e.errMsg:e.msg;return t=null!==e.errMsg?"err":null===e.errMsg&&null!==e.msg?"message":"",a.a.createElement("div",{className:t},n)})),C=a.a.forwardRef((function(e,t){var n=Object(r.useState)(!1),l=Object(M.a)(n,2),c=l[0],u=l[1],o={display:c?"none":""},i={display:c?"":"none"},s=function(){u(!c)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:s}})),a.a.createElement("div",null,a.a.createElement("div",{style:o},a.a.createElement("button",{onClick:s},e.buttonLabel)),a.a.createElement("div",{style:i},e.children,a.a.createElement("button",{onClick:s},"Cansel")))})),N=function(e){var t=Object(r.useState)(""),n=Object(M.a)(t,2),a=n[0],l=n[1];return{type:e,value:a,onChange:function(e){l(e.target.value)},cleanField:function(){l("")}}},U={logInUser:function(e,t){return function(){var n=Object(p.a)(d.a.mark((function n(r){var a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.login({username:e,password:t});case 2:a=n.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(a)),b.setToken(a.token),r({type:"LOG_IN",data:a});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},logOutUser:function(){return{type:"LOG_OUT",data:null}},setUser:function(e){return{type:"LOG_IN",data:e}},initializeBlogs:function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getAll();case 2:n=e.sent,t({type:"BLOG",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},like:function(e,t){var n=t.likes+1,r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.find((function(e){return e.id===t.id})),{likes:n});return function(){var e=Object(p.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.update(t.id,r);case 2:a=e.sent,n({type:"LIKE",data:{likedBlog:a,id:a.id}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},notificationMessage:function(e,t){return function(){var n=Object(p.a)(d.a.mark((function n(r){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r({type:"MESSAGE",data:e}),setTimeout((function(){r({type:"CLEAR_MESSAGE",data:null})}),1e3*t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},errorMessage:function(e,t){return function(){var n=Object(p.a)(d.a.mark((function n(r){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r({type:"ERR_MESSAGE",data:e}),setTimeout((function(){r({type:"CLEAR_MESSAGE",data:null})}),1e3*t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},R=Object(S.b)((function(e){return{blogs:e.blogs,message:e.message,errMessage:e.errMessage,user:e.user}}),U)((function(e){var t=N("text"),n=N("password"),l=N("text"),c=N("text"),u=N("text"),o=N("text"),i=a.a.createRef();Object(r.useEffect)((function(){e.initializeBlogs()}),[]),Object(r.useEffect)((function(){var t=window.localStorage.getItem("loggedBlogappUser");if(t){var n=JSON.parse(t);void 0!==n&&null!==n&&(e.setUser(n),b.setToken(n.token))}}),[]);var s=function(t){try{window.confirm("remove blog ".concat(t.title," by ").concat(t.author))&&(b.remove(t.id),e.blogs.filter((function(e){return e.id!==t.id})),e.notificationMessage("Blog '".concat(t.title,"' is removed"),5))}catch(n){console.log("Error:",n)}},f=function(){var r=Object(p.a)(d.a.mark((function r(a){return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a.preventDefault(),r.prev=1,r.next=4,e.logInUser(t.value,n.value);case 4:e.notificationMessage("You are logged in succesfully",5),r.next=12;break;case 7:r.prev=7,r.t0=r.catch(1),t.cleanField(),n.cleanField(),e.errorMessage("Wrong username or password!",5);case 12:case"end":return r.stop()}}),r,null,[[1,7]])})));return function(e){return r.apply(this,arguments)}}(),m=function(t){e.like(e.blogs,t),e.notificationMessage("You added like to the blog!",5)};return a.a.createElement("div",null,a.a.createElement(G,null),null===e.user?a.a.createElement(x,{handleLogin:f,username:t,password:n}):a.a.createElement("div",null,a.a.createElement("h1",null,"Blogs"),a.a.createElement("p",null,e.user.name," logged in\xa0\xa0",a.a.createElement("button",{onClick:function(){window.localStorage.removeItem("loggedBlogappUser"),b.removeToken(),e.logOutUser()}},"Log out")),a.a.createElement(C,{buttonLabel:"New blog",ref:i},a.a.createElement(L,{handleBlogi:function(t){t.preventDefault(),i.current.toggleVisibility();var n={title:l.value,author:c.value,url:u.value,likes:o.value};b.create(n).then((function(t){e.blogs.concat(t),l.cleanField(),c.cleanField(),u.cleanField(),o.cleanField(),e.notificationMessage("New Blog '".concat(n.title,"' is added"),5)}))},title:l,author:c,url:u,likes:o})),e.blogs.map((function(t){return a.a.createElement(A,{key:t.title,blog:t,userName:e.user.username,blogiUserName:t.user.username,addLike:function(){return m(t)},removeBlog:function(){return s(t)}})}))))}));c.a.render(a.a.createElement(S.a,{store:j},a.a.createElement(R,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.6def273a.chunk.js.map