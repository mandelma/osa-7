(window.webpackJsonpblogit=window.webpackJsonpblogit||[]).push([[0],{58:function(e,t,n){e.exports=n(94)},85:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(21),u=n.n(l),c=n(23),o=n(51),i=n(52),s=n(5),d=n.n(s),m=n(6),p=n(14),f=n.n(p),g=null,E={getAll:function(){var e=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/api/blogs");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:g}},e.next=3,f.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(m.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:g}},e.prev=1,e.next=4,f.a.put("".concat("/api/blogs","/").concat(t),n,a);case 4:return r=e.sent,e.abrupt("return",r.data);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),setToken:function(e){g="bearer ".concat(e)},removeToken:function(){g=null},remove:function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:g}},e.next=3,f.a.delete("".concat("/api/blogs","/").concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BLOG":return t.data;case"LIKE":return e.map((function(e){return e.id!==t.data.id?e:t.data.likedBlog}));case"ADD_NEW":return e.concat(t.data);case"REMOVE":return e.filter((function(e){return e.id!==t.data}));default:return e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MESSAGE":case"ERR_MESSAGE":case"CLEAR_MESSAGE":case"DO":return t.data;default:return e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERR_MESSAGE":case"CLEAR_MESSAGE":return t.data;default:return e}},y={login:function(){var e=Object(m.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN":case"LOG_OUT":return t.data;default:return e}},O={getAll:function(){var e=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERS":return t.data;default:return e}},j=Object(c.c)({errMessage:w,message:h,blogs:b,user:k,users:x}),L=Object(c.d)(j,Object(c.a)(o.a)),S=n(22),B=(n(85),n(30)),M=r.a.forwardRef((function(e,t){var n=Object(a.useState)(!1),l=Object(B.a)(n,2),u=l[0],c=l[1],o={display:u?"none":""},i={display:u?"":"none"},s=function(){c(!u)};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:s}})),r.a.createElement("div",null,r.a.createElement("div",{style:o},r.a.createElement("button",{onClick:s},e.buttonLabel)),r.a.createElement("div",{style:i},e.children,r.a.createElement("button",{onClick:s},"Cansel")))})),A=n(98),R=n(96),C=function(e){return r.a.createElement("div",null,r.a.createElement("h2",null,"Create new blog"),r.a.createElement(A.a,{onSubmit:e.handleBlogi},r.a.createElement(A.a.Group,null,r.a.createElement(A.a.Label,null,"Title:"),r.a.createElement(A.a.Control,e.title),r.a.createElement(A.a.Label,null,"Author:"),r.a.createElement(A.a.Control,e.author),r.a.createElement(A.a.Label,null,"Url:"),r.a.createElement(A.a.Control,e.url),r.a.createElement(A.a.Label,null,"Likes:"),r.a.createElement(A.a.Control,e.likes),r.a.createElement("br",null),r.a.createElement(R.a,{variant:"primary",type:"submit"},"Create Blog"))))},G=n(13),U=function(e){var t=e.blogs,n=e.addBlog,a=e.title,l=e.author,u=e.url,c=e.likes,o=e.blogFormRef,i={paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5};return r.a.createElement("div",{className:"blogi"},r.a.createElement(M,{buttonLabel:"New blog",ref:o},r.a.createElement(C,{handleBlogi:n,title:a,author:l,url:u,likes:c})),r.a.createElement("br",null),r.a.createElement("div",null,t.map((function(e){return r.a.createElement("div",{style:i,key:e.id},r.a.createElement(G.b,{to:"blogs/".concat(e.id)},e.title))}))))},_=n(97),N=function(e){var t=e.users;return r.a.createElement("div",null,r.a.createElement("h2",null,"Users"),r.a.createElement(_.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"users"),r.a.createElement("td",null,"blogs created"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(G.b,{to:"users/".concat(e.id)},e.name)),r.a.createElement("td",null,e.blogs.length))})))))},I=n(17),T=function(e){return null===e.user?r.a.createElement("div",null,r.a.createElement("h2",null,"Log in to application:"),r.a.createElement(A.a,{onSubmit:e.handleLogin},r.a.createElement(A.a.Group,null,r.a.createElement(A.a.Label,null,"Username:"),r.a.createElement(A.a.Control,e.username),r.a.createElement(A.a.Label,null,"Password:"),r.a.createElement(A.a.Control,e.password),r.a.createElement("br",null),r.a.createElement(R.a,{variant:"primary",type:"submit"},"Kirjaudu"))),r.a.createElement("br",null)):r.a.createElement(I.a,{to:"/"})},F=function(e){var t=e.userId,n=e.blogs,a=(e.user,e.users.find((function(e){return e.id===t})));return r.a.createElement("div",null,r.a.createElement("h2",null,a.name),r.a.createElement("p",null,"Added blogs"),r.a.createElement("ul",null,n.map((function(e){return e.user.id===t?r.a.createElement("li",{key:e.id},e.title):null}))))},D=function(e){var t=e.blogs,n=e.removeBlog,a=e.addLike,l=e.id,u=e.user;return null===u?r.a.createElement(I.a,{to:"/login"}):r.a.createElement("div",null,t.map((function(e){return e.id===l?r.a.createElement("div",{key:e.id},r.a.createElement("h3",{style:{color:"green"}},r.a.createElement("bold",null,e.title)),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement("a",{href:e.url},e.url)),r.a.createElement("br",null),r.a.createElement("div",null,e.likes," likes\xa0\xa0",r.a.createElement("button",{onClick:function(){return a(e)}},"Like")),"     ",r.a.createElement("br",null),r.a.createElement("p",null,"added by ",e.author),r.a.createElement("br",null),r.a.createElement("br",null),e.user.username===u.username?r.a.createElement("button",{onClick:function(){return n(e)}},"Remove"):null):null})))},P=n(100),z=n(99),J=function(e){var t=e.user,n=e.blogs,a=e.users,l=e.logOut,u=e.addLike,c=e.removeBlog,o=e.addBlog,i=e.title,s=e.author,d=e.url,m=e.likes,p=e.handleLogin,f=e.username,g=e.salasana,E=e.blogFormRef,v={padding:10};return r.a.createElement("div",null,r.a.createElement(G.a,null,r.a.createElement("div",null,r.a.createElement(P.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(P.a.Toggle,{"aria-controls":"rewsoinsive-navbar-nav"}),r.a.createElement(P.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(z.a,{className:"mr-auto"},r.a.createElement(z.a.Link,{href:"#",as:"span"},r.a.createElement(G.b,{style:v,to:"/"},"Home")),r.a.createElement(z.a.Link,{href:"#",as:"span"},r.a.createElement(G.b,{style:v,to:"/users"},"Users")),r.a.createElement(z.a.Link,{href:"#",as:"span"},t?r.a.createElement("em",null,t.name," logged in"):r.a.createElement(G.b,{to:"/login"},"login"),"\xa0\xa0",t?r.a.createElement("button",{onClick:l},"log out"):null))))),r.a.createElement("h1",null,"Blogs"),r.a.createElement("div",null,r.a.createElement(I.b,{exact:!0,path:"/",render:function(){return r.a.createElement(U,{addLike:u,blogs:n,addBlog:o,title:i,author:s,url:d,likes:m,blogFormRef:E})}}),r.a.createElement(I.b,{exact:!0,path:"/users",render:function(){return r.a.createElement(N,{users:a})}}),r.a.createElement(I.b,{exact:!0,path:"/users/:id",render:function(e){var l=e.match;return r.a.createElement(F,{userId:l.params.id,user:t,blogs:n,users:a})}}),r.a.createElement(I.b,{exact:!0,path:"/blogs/:id",render:function(e){var a=e.match;return r.a.createElement(D,{id:a.params.id,user:t,blogs:n,addLike:u,removeBlog:c})}}),r.a.createElement(I.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(T,{user:t,handleLogin:p,username:f,password:g})}}))))},V=Object(S.b)((function(e){return{msg:e.message,errMsg:e.errMessage}}))((function(e){var t,n=null===e.msg?e.errMsg:e.msg;return t=null!==e.errMsg?"err":null===e.errMsg&&null!==e.msg?"message":"",r.a.createElement("div",{className:t},n)})),W=function(e){var t=Object(a.useState)(""),n=Object(B.a)(t,2),r=n[0],l=n[1];return{type:e,value:r,onChange:function(e){l(e.target.value)},cleanField:function(){l("")}}},K={logInUser:function(e,t){return function(){var n=Object(m.a)(d.a.mark((function n(a){var r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.login({username:e,password:t});case 2:r=n.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(r)),E.setToken(r.token),a({type:"LOG_IN",data:r});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},logOutUser:function(){return{type:"LOG_OUT",data:null}},setUser:function(e){return{type:"LOG_IN",data:e}},initializeBlogs:function(){return function(){var e=Object(m.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.getAll();case 2:n=e.sent,t({type:"BLOG",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},initializeUsers:function(){return function(){var e=Object(m.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getAll();case 2:n=e.sent,t({type:"GET_USERS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},like:function(e,t){var n=t.likes+1,a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.find((function(e){return e.id===t.id})),{likes:n});return function(){var e=Object(m.a)(d.a.mark((function e(n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.update(t.id,a);case 2:r=e.sent,n({type:"LIKE",data:{likedBlog:r,id:r.id}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},addNewBlog:function(e){return function(){var t=Object(m.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.create(e);case 2:a=t.sent,n({type:"ADD_NEW",data:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},removeBlog:function(e){return function(){var t=Object(m.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.remove(e.id);case 2:n({type:"REMOVE",data:e.id});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},notificationMessage:function(e,t){return function(){var n=Object(m.a)(d.a.mark((function n(a){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a({type:"MESSAGE",data:e}),setTimeout((function(){a({type:"CLEAR_MESSAGE",data:null})}),1e3*t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},errorMessage:function(e,t){return function(){var n=Object(m.a)(d.a.mark((function n(a){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a({type:"ERR_MESSAGE",data:e}),setTimeout((function(){a({type:"CLEAR_MESSAGE",data:null})}),1e3*t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},H=Object(S.b)((function(e){return{blogs:e.blogs,message:e.message,errMessage:e.errMessage,user:e.user,users:e.users}}),K)((function(e){var t=W("text"),n=W("password"),l=W("text"),u=W("text"),c=W("text"),o=W("text"),i=r.a.createRef();Object(a.useEffect)((function(){e.initializeBlogs()}),[]),Object(a.useEffect)((function(){e.initializeUsers()}),[]),Object(a.useEffect)((function(){var t=window.localStorage.getItem("loggedBlogappUser");if(t){var n=JSON.parse(t);void 0!==n&&null!==n&&(e.setUser(n),E.setToken(n.token))}}),[]);var s=function(){var a=Object(m.a)(d.a.mark((function a(r){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),a.prev=1,a.next=4,e.logInUser(t.value,n.value);case 4:e.notificationMessage("You are logged in succesfully",5),t.cleanField(),n.cleanField(),a.next=14;break;case 9:a.prev=9,a.t0=a.catch(1),t.cleanField(),n.cleanField(),e.errorMessage("Wrong username or password!",5);case 14:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}(),p=function(){var t=Object(m.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),i.current.toggleVisibility(),a={title:l.value,author:u.value,url:c.value,likes:o.value},e.addNewBlog(a),l.cleanField(),u.cleanField(),c.cleanField(),o.cleanField(),e.notificationMessage("New Blog '".concat(a.title,"' is added"),5);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement(V,null),r.a.createElement("div",null,r.a.createElement(J,{users:e.users,blogs:e.blogs,user:e.user,logOut:function(){window.localStorage.removeItem("loggedBlogappUser"),E.removeToken(),e.logOutUser()},addBlog:p,title:l,author:u,url:c,likes:o,blogFormRef:i,addLike:function(t){e.like(e.blogs,t),e.notificationMessage("You added like to the blog!",5)},removeBlog:function(t){try{window.confirm("remove blog ".concat(t.title," by ").concat(t.author))&&(e.removeBlog(t),e.notificationMessage("Blog '".concat(t.title,"' is removed"),5))}catch(n){console.log("Error:",n)}},handleLogin:s,username:t,salasana:n})))}));u.a.render(r.a.createElement(S.a,{store:L},r.a.createElement(H,null)),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.3c0e3524.chunk.js.map